{"version":3,"sources":["app.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":[";(function() {\n  let Game = function(canvasId) {\n    let canvas = document.getElementById(canvasId);\n    let screen = canvas.getContext('2d');\n    let gameSize = { x: canvas.width, y: canvas.height};\n\n    this.bodies = createInvaders(this).concat(new Player(this, gameSize));\n\n    let self = this;\n    let tick = function() { //all main gaime logic\n      self.update();\n      self.draw(screen, gameSize);\n      requestAnimationFrame(tick);\n    };\n\n    tick();\n  };\n\n  Game.prototype = {\n    update: function() {\n      let bodies = this.bodies;\n      let notCollidingWithAnything = function(b1) {\n        return bodies.filter(function(b2) { return colliding(b1, b2); }).length === 0;\n      }\n      this.bodies = this.bodies.filter(notCollidingWithAnything);\n      for (let i = 0; i < this.bodies.length; i++) {\n        this.bodies[i].update();\n      }\n    },\n\n    draw: function(screen, gameSize) {  //main draw function\n      screen.clearRect(0, 0, gameSize.x, gameSize.y);\n      for (let i = 0; i < this.bodies.length; i++) {\n        drawRect(screen, this.bodies[i]);\n      }\n    },\n    addBody: function(body) {\n      this.bodies.push(body);\n    },\n\n    invadersBelow: function(invader) {\n      return this.bodies.filter(function(b) {\n        return b instanceof Invader &&\n          b.center.y > invader.center.y &&\n          b.center.x - invader.center.x < invader.size.x;\n      }).length > 0;\n\n    }\n  };\n\n  let Player = function(game, gameSize) { //constructor function\n    this.game = game; //\n    this.size = { x: 15, y: 15 }; //player size\n    this.center = { x: gameSize.x / 2, y: gameSize.y - this.size.x }; //where player is at the moment\n    this.keyboarder = new Keyboarder();\n  };\n\n  Player.prototype = {\n    update: function() {\n      if (this.keyboarder.isDown(this.keyboarder.KEYS.LEFT)) {\n        this.center.x -=2;\n      } else if (this.keyboarder.isDown(this.keyboarder.KEYS.RIGHT)) {\n        this.center.x +=2;\n      }\n\n      if (this.keyboarder.isDown(this.keyboarder.KEYS.SPACE)) {\n        let bullet = new Bullet({ x: this.center.x, y: this.center.y - this.size.y - 10 },\n                                { x: 0, y: -7});\n        this.game.addBody(bullet);\n      }\n    }\n  };\n\n  let Invader = function(game, center) { //constructor function\n    this.game = game; //\n    this.size = { x: 15, y: 15 }; //player size\n    this.center = center;\n    this.patrolX = 0;\n    this.speedX = 0.3;\n  };\n\n  Invader.prototype = {\n    update: function() {\n      if (this.patrolX < 0 || this.patrolX > 40) {\n        this.speedX = -this.speedX;\n      }\n\n      this.center.x += this.speedX;\n      this.patrolX += this.speedX;\n\n      if (Math.random() > .0795 && !this.game.invadersBelow(this)) {\n        let bullet = new Bullet({ x: this.center.x, y: this.center.y + this.size.y / 2 },\n                                { x: Math.random() - 0.5, y: 2 });\n        this.game.addBody(bullet);\n\n      }\n    }\n  };\n\n  let createInvaders = function(game) {\n    let invaders = [];\n    for (let i = 0; i < 24; i++) {\n      let x = 30 + (i % 8) * 30;\n      let y = 30 + (i % 3) * 30;\n      invaders.push(new Invader(game, { x: x, y: y }));\n    }\n    return invaders;\n  }\n\n  let Bullet = function(center, velocity) { //constructor function\n    this.size = { x: 3, y: 3 }\n    this.center = center;\n    this.velocity = velocity;\n  };\n\n  Bullet.prototype = {\n    update: function() {\n        this.center.x += this.velocity.x;\n        this.center.y += this.velocity.y;\n    }\n  };\n\n\n\n  let drawRect = function(screen, body) {             //used to draw bullets and invaders\n    screen.fillRect(body.center.x - body.size.x / 2,\n                    body.center.y - body.size.y / 2,\n                    body.size.x, body.size.y);\n  };\n\n  let Keyboarder = function() {\n      let keyState = {};\n\n      window.onkeydown = function(e) {\n        keyState[e.keyCode] = true;\n      };\n\n      window.onkeyup = function(e) {\n        keyState[e.keyCode] = false;\n      };\n\n      this.isDown = function(keyCode) {\n        return keyState[keyCode] === true;\n      };\n\n      this.KEYS = { LEFT: 37, RIGHT: 39, SPACE: 32 };\n  };\n\n  let colliding = function(b1, b2) {\n    return !(b1 === b2 ||\n      b1.center.x + b1.size.x / 2 < b2.center.x - b2.size.x / 2 ||\n      b1.center.y + b1.size.y / 2 < b2.center.y - b2.size.y / 2 ||\n      b1.center.x - b1.size.x / 2 > b2.center.x + b2.size.x / 2 ||\n      b1.center.y - b1.size.y / 2 > b2.center.y + b2.size.y / 2);\n  }\n\n  window.onload = function() {\n    new Game(\"screen\");\n  };\n})();\n"],"sourceRoot":"/source/"}